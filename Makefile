#===============================================================================
# WDC Tools Assembler Definitions
#-------------------------------------------------------------------------------

AS			=	wdc816as

LD			=	wdcln

RM			=	erase

AS_FLAGS	=	-g -l

LD_FLAGS	=	-g -hm28 -t -C0300

DEBUG		=	wdcdb.exe

#===============================================================================
# Rules
#-------------------------------------------------------------------------------

.asm.obj:
		$(AS) $(AS_FLAGS) $<

#===============================================================================
# Targets
#-------------------------------------------------------------------------------

OBJS	= \
		w65c265sxb.obj \
		ans-forth.obj

all:	ans-forth.s28

clean:
		$(RM) $(OBJS)
		$(RM) *.bin
		$(RM) *.lst

debug:
		$(DEBUG)

#===============================================================================
# Dependencies
#-------------------------------------------------------------------------------

ans-forth.s28: $(OBJS)
		$(LD) $(LD_FLAGS) -O $@ $(OBJS)

w65c265sxb.obj: \
		w65c816.inc \
		w65c265.inc \
		w65c265sxb.inc \
		w65c265sxb.asm

ans-forth.obj: \
		w65c816.inc \
		ans-forth.asm \
		device.asm
